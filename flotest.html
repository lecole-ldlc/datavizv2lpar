<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <title>Test Generate SVG</title>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="css/bootstrap-grid.css" rel="stylesheet" type="text/css">
    <link href="css/bootstrap-reboot.css" rel="stylesheet" type="text/css">
    <script src="http://d3js.org/d3.v4.js" charset="utf-8"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
    <script type='text/javascript'></script>
    <script src="js/jquery-3.2.1.min.js"></script>
    <style>
        svg {
            margin-top: 10px;
            border: 1px black solid;
        }
    </style>

</head>
<body>

<div class="row">
    <div class="col-2">
    </div>
    <div class="col-4">
    </div>
    <div class="col-4">
        <button id="place_direct" class="btn btn-primary">Valider</button>
    </div>

</div>
<div class="row">
    <div class="col-2">
    </div>
    <div class="col-10">
        <svg id="svg" width="600" height="880">
        </svg>
    </div>
</div>
<script>
    function SVG(tag) {
        return document.createElementNS('http://www.w3.org/2000/svg', tag);
    }

    //import donn√©es depuis gsheet
    var publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/1EtGVW0KmbFtQruyAgCMaFYFCcenqRsBLTgJcPwcsszc/edit?usp=sharing';

    function init() {
        Tabletop.init({
            key: publicSpreadsheetUrl,
            callback: showInfo,
            simpleSheet: true
        })
    }

    function showInfo(data, tabletop) {
        alert('Successfully processed!')
        console.log(data);


        var dropDown = d3.select("body").append("select")
            .attr("name", "name-list");


        var options = dropDown.selectAll("option")
            .data(data)
            .enter()
            .append("option");

        options.text(function(d) {
            return d.elements;
        })
            .attr("value", function(d) {
                return d.elements;
            });

        $(function () {
            $("#place_direct").click(function () {
                var txt = $("d.elements")
                $("#svg").html("");
                var font = "sans-serif"
                d3.select("svg").append("text")
                    .attr("x", 100 + Math.random() * 100)
                    .attr("y", 100 + Math.random() * 100)
                    .text(txt)
                    .attr("font-family", font)
                    .attr("font-size", "30px")
            });
        });
    }
    window.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>